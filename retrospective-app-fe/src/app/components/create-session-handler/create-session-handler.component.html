<div class="create-session-wrapper">
    <div class="header">
        <h1>
            <span class="material-icons">add_circle</span>
            Create New Session
        </h1>
        <p>Start a new retrospective session for your team</p>
    </div>

    <div class="form-container">
        <div class="form-group">
            <label for="sessionName">
                <span class="material-icons">event_note</span>
                Session Name
            </label>
            <input 
                type="text" 
                id="sessionName" 
                name="sessionName" 
                [(ngModel)]="sessionName"
                placeholder="Enter session name (e.g., Sprint 24 Retro)"
                (input)="onInputChange()"
                (keyup.enter)="createSession()"
                required>
        </div>

        <div class="form-group">
            <label for="team">
                <span class="material-icons">group</span>
                Team
            </label>
            <select id="team" name="team" [(ngModel)]="team">
                <option value="MYS Team">MYS Team</option>
                <option value="CSM Team">CSM Team</option>
            </select>
        </div>

        <div class="form-group">
            <div class="section-label-container">
                <label for="section">
                    <span class="material-icons">view_lists</span>
                    Sections
                </label>
                <span class="section-reminder">(Optional - default will be used if empty)</span>
            </div>

            <div class="section-list" *ngIf="sections.length > 0; else noCustomSections">
                <div class="section-item" *ngFor="let section of sections; let i = index">
                    <div class="section-info">
                        <span class="material-icons">drag_indicator</span>
                        <span class="section-title">{{ section.title }}</span>
                    </div>

                    <button
                        class="remove-btn"
                        title="Remove Section"
                        type="button"
                        (click)="removeSection(i)"
                    >
                        <span class="material-icons">close</span>
                    </button>
                </div>
            </div>

            <ng-template #noCustomSections>
                <div class="custom-section-container">
              
                        <span class="material-icons">inbox</span>
                        <p class="reminder-bold">No custom sections added yet</p>
                        <p class="reminder-light">Default section (Went Well, Needs Improvement and Action Item) will be used</p>
    
                </div>
            </ng-template>

            <div class="add-section-container">
                <input 
                    type="text" 
                    id="newSectionTitle" 
                    name="newSectionTitle" 
                    [(ngModel)]="newSectionTitle"
                    required
                    type="text" 
                    class="add-session-input" 
                    placeholder="Enter new session"
                    (keyup.enter)="addSection()"
                    (input)="onInputChange()"
                >
                <button 
                    class="add-section-btn"
                    (click)="addSection()"
                >
                    <span class="material-icons">add</span>
                </button>
            </div>

            <div class="error-message" *ngIf="showError">
                <span class="material-icons">error</span>
                {{ errorMessage }}
            </div>
        </div>

        

        <div class="button-group">
            <button class="cancel-btn" type="button" (click)="cancel()">
                <span class="material-icons">close</span>
                Cancel
            </button>
            <button 
                class="create-btn" 
                type="button" 
                (click)="createSession()"
            >
                <span class="material-icons">check_circle</span>
                Create Session
            </button>
        </div>

        
    </div>
</div>

<div class="modal-overlay" *ngIf="showSuccessModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="success-icon">
            <span class="material-icons">check</span>
        </div>
        <h2>Session Created!</h2>
        <p>
            Your retrospective session has been successfully created.
            <strong>{{ createdSessionName }}</strong>
        </p>
        <button (click)="closeModal()">Continue</button>
    </div>
</div>